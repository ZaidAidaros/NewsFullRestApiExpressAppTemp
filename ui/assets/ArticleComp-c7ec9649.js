import{w as v}from"./writterController-5201010d.js";import{bB as A,bC as w,H as x,J as B,K as N,M as E,aj as P,bD as T,_ as M,v as F,R as z,I as D,r as d,o as m,c as h,w as l,a as i,V as R,b as n,t as f,l as j,k,d as _,e as p,z as b,i as K,f as O}from"./index-50d0d424.js";import{L as W,B as $}from"./BookMark-5181d7c9.js";const S=(()=>A.reduce((e,s)=>(e[s]={type:[Boolean,String,Number],default:!1},e),{}))(),I=(()=>A.reduce((e,s)=>{const t="offset"+w(s);return e[t]={type:[String,Number],default:null},e},{}))(),V=(()=>A.reduce((e,s)=>{const t="order"+w(s);return e[t]={type:[String,Number],default:null},e},{}))(),y={col:Object.keys(S),offset:Object.keys(I),order:Object.keys(V)};function G(e,s,t){let a=e;if(!(t==null||t===!1)){if(s){const r=s.replace(e,"");a+=`-${r}`}return e==="col"&&(a="v-"+a),e==="col"&&(t===""||t===!0)||(a+=`-${t}`),a.toLowerCase()}}const H=["auto","start","end","center","baseline","stretch"],J=x({cols:{type:[Boolean,String,Number],default:!1},...S,offset:{type:[String,Number],default:null},...I,order:{type:[String,Number],default:null},...V,alignSelf:{type:String,default:null,validator:e=>H.includes(e)},...B(),...N()},"VCol"),L=E()({name:"VCol",props:J(),setup(e,s){let{slots:t}=s;const a=P(()=>{const r=[];let o;for(o in y)y[o].forEach(c=>{const C=e[c],u=G(o,c,C);u&&r.push(u)});const g=r.some(c=>c.startsWith("v-col-"));return r.push({"v-col":!g||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),r});return()=>{var r;return T(e.tag,{class:[a.value,e.class],style:e.style},(r=t.default)==null?void 0:r.call(t))}}}),U={name:"ArticleComp",props:["article","isEditable"],data:()=>({isLoading:!1,isAuth:!1,error:!1,msg:null,show:!1,comm:!1,like:!1,newComment:null}),mounted(){this.article.comments=[],this.isAuth=this.$store.getters.isAuth},computed:{comments(){return this.article.comments?this.article.comments:[]}},methods:{shareArticle:function(){navigator.share?navigator.share({title:this.article.title,text:this.article.shortContent,url:this.$router.currentRoute+"/"+this.article.Id}).then(()=>console.log("Shared successfully","/articlePage/"+this.article.Id)).catch(e=>console.error("Error sharing:",e)):console.log("Web Share API not supported")},markArticle:async function(){if(this.isAuth){this.error=!1,this.msg=null;const e=await F.addBookMark(this.$props.article.Id);if(e.state)if(this.like)if(this.like.like===isLike){const s=this.likes.filter(t=>t.Id!==this.like.Id);this.likes=s,this.like=null}else{this.like.like=isLike;const s=this.articleLikes.map(t=>t.Id===this.like.Id?this.like:t);this.likes=s}else this.like=e.articleLike,this.articleLikes.push(this.like);else this.msg=e.message,this.error=!0,setTimeout(()=>{this.error=!1,this.msg=null},2e3)}else this.$router.push({name:"LogIn"})},deleteArticle:async function(){this.isLoading=!0,this.error=!1,this.msg=null;const e=await v.deleteArticle(this.article.Id);this.isLoading=!1,this.error=!e.state,this.msg=e.message,setTimeout(()=>{this.msg=null,this.error=!1},2e3),e.state&&this.$emit("onArticleDeleted",this.article.Id)},goToEditArticleForm:async function(){await this.$store.dispatch("setArticle",this.article),this.$router.push({name:"ArticleForm"})},goToArticlePage:async function(){await this.$store.dispatch("setArticle",this.article),this.$router.push({name:"ArticlePage",params:{id:this.article.Id}})}},components:{LikeComp:W,ResMsg:z,ImageComp:D,BookMark:$}};function q(e,s,t,a,r,o){const g=d("res-msg"),c=d("image-comp"),C=d("BookMark"),u=d("like-comp");return m(),h(O,{class:"ma-2 pa-2"},{default:l(()=>[i(p,null,{default:l(()=>[i(R,null,{default:l(()=>[n(f(t.article.title),1)]),_:1}),i(j),t.isEditable?(m(),h(k,{key:0,color:"orange-lighten-2",variant:"text","prepend-icon":"mdi-note-edit",onClick:o.goToEditArticleForm},{default:l(()=>[n(" Edit ")]),_:1},8,["onClick"])):_("",!0),t.isEditable?(m(),h(k,{key:1,onClick:o.deleteArticle,loading:e.isLoading,color:"red-lighten-2",variant:"text","prepend-icon":"mdi-note-remove"},{default:l(()=>[n(" Delete ")]),_:1},8,["onClick","loading"])):_("",!0)]),_:1}),i(g,{msg:e.msg,error:e.error},null,8,["msg","error"]),t.article.writter?(m(),h(b,{key:0},{default:l(()=>[n(" Writter: "+f(t.article.writter.name),1)]),_:1})):_("",!0),i(b,null,{default:l(()=>[n(f(t.article.updatedAt),1)]),_:1}),i(p,null,{default:l(()=>[i(L,null,{default:l(()=>[i(K,null,{default:l(()=>[n(f(t.article.shortContent),1)]),_:1})]),_:1}),i(L,null,{default:l(()=>[i(c,{src:"api/"+t.article.image,alt:t.article.title,mx_h:"300px",mx_w:"300px",mi_w:"200px"},null,8,["src","alt"])]),_:1})]),_:1}),i(p,{class:"my-4"},{default:l(()=>[i(k,{color:"green-lighten-2",variant:"text",onClick:o.goToArticlePage,size:"small","append-icon":e.show?"mdi-chevron-up":"mdi-gesture-tap"},{default:l(()=>[n("Explore ")]),_:1},8,["onClick","append-icon"]),i(k,{"append-icon":"mdi-share-variant",color:"blue-lighten-2",variant:"text",onClick:o.shareArticle,size:"small"},{default:l(()=>[n(" Share ")]),_:1},8,["onClick"]),i(C,{"user-book-marks":t.article.userBookMarks,"article-id":t.article.Id},null,8,["user-book-marks","article-id"]),i(u,{"article-likes":t.article.articleLikes,"article-id":t.article.Id},null,8,["article-likes","article-id"])]),_:1})]),_:1})}const Z=M(U,[["render",q]]);export{Z as A};
