import{_ as c,R as d,v as k,r as f,o as p,c as _,w as a,a as o,b as h,t as m,k as u,f as L,g as C,F as I}from"./index-50d0d424.js";const M={name:"LikeComp",props:["articleLikes","articleId"],components:{ResMsg:d},data(){return{like:null,isAuth:!1,likes:[],error:!1,msg:null}},mounted(){this.likes=this.articleLikes,this.isAuth=this.$store.getters.isAuth,this.isAuth&&this.likes.length&&this.likes.forEach(e=>{e.userId===this.$store.getters.getUser.Id&&(this.like=e)})},computed:{likesCount(){return this.likes.filter(e=>e.like).length},disLikesCount(){return this.likes.filter(e=>!e.like).length}},methods:{onLikeAc:async function(e){if(this.isAuth){this.error=!1,this.msg=null;const t=await k.onLike(e,this.articleId,this.like);if(t.state)if(this.like)if(this.like.like===e){const l=this.likes.filter(r=>r.Id!==this.like.Id);this.likes=l,this.like=null}else{this.like.like=e;const l=this.articleLikes.map(r=>r.Id===this.like.Id?this.like:r);this.likes=l}else this.like=t.articleLike,this.articleLikes.push(this.like);else this.msg=t.message,this.error=!0,setTimeout(()=>{this.error=!1,this.msg=null},2e3)}else this.$router.push({name:"LogIn"})}}};function A(e,t,l,r,i,s){const n=f("res-msg");return p(),_(L,{flat:""},{default:a(()=>[o(u,{flat:"",size:"small","append-icon":this.like&&i.like.like?"mdi-thumb-up":"mdi-thumb-up-outline",onClick:t[0]||(t[0]=g=>s.onLikeAc(!0))},{default:a(()=>[h(m(s.likesCount>1e3?s.likesCount/-1001+"K":s.likesCount),1)]),_:1},8,["append-icon"]),o(u,{flat:"",size:"small","append-icon":this.like&&!i.like.like?"mdi-thumb-down":"mdi-thumb-down-outline",onClick:t[1]||(t[1]=g=>s.onLikeAc(!1))},{default:a(()=>[h(m(s.disLikesCount>1e3?s.disLikesCount/-1001+"K":s.disLikesCount),1)]),_:1},8,["append-icon"]),o(n,{msg:i.msg,error:i.error},null,8,["msg","error"])]),_:1})}const w=c(M,[["render",A],["__scopeId","data-v-abf4081a"]]),B={name:"BookMark",props:["userBookMarks","articleId"],components:{ResMsg:d},data(){return{mark:null,isAuth:!1,bookMarks:[],error:!1,msg:null}},mounted(){this.bookMarks=this.userBookMarks,this.isAuth=this.$store.getters.isAuth,this.isAuth&&this.bookMarks.length&&this.bookMarks.forEach(e=>{e.userId===this.$store.getters.getUser.Id&&(this.mark=e)})},methods:{onMark:async function(){if(this.isAuth){this.error=!1,this.msg=null;let e=null;this.mark?e=await k.deleteBookMark(this.mark.Id):e=await k.addBookMark(this.articleId),e.state?this.mark?this.mark=null:(this.mark=e.userBookMark,this.userBookMarks.push(this.mark)):(this.msg=e.message,this.error=!0,setTimeout(()=>{this.error=!1,this.msg=null},2e3))}else this.$router.push({name:"LogIn"})}}};function b(e,t,l,r,i,s){const n=f("res-msg");return p(),C(I,null,[o(u,{size:"small",flat:"","append-icon":this.mark?"mdi-book-marker":"mdi-book-marker-outline",onClick:s.onMark},{default:a(()=>[h("Reed Later")]),_:1},8,["append-icon","onClick"]),o(n,{msg:i.msg,error:i.error},null,8,["msg","error"])],64)}const x=c(B,[["render",b]]);export{x as B,w as L};
