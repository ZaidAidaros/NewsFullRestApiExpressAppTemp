import{a as g}from"./adminController-2c375c65.js";import{_ as V,R as C,r as v,o as d,c as u,w as e,a as i,b as s,t as o,V as A,bz as n,z as _,k as f,m as p,ak as k,ap as I,B as S,e as W,i as c,j as y,d as w,l as R,bA as T,f as x}from"./index-50d0d424.js";const D={name:"WritterComp",components:{ResMsg:C},props:["writter"],emits:["onDelete","onApprove","onStop"],data(){return{show:!1,loading:!1,error:!1,msg:null,wNotification:null}},methods:{handleWritterReq:async function(l){this.loading=!0,this.error=!1,this.msg=null;const r={Id:this.writter.Id,isApproved:l,userId:this.writter.userId};this.wNotification&&(r.notification=this.wNotification);const t=await g.updateWritter(r);this.loading=!1,this.error=!t.state,this.msg=t.message,t.state&&(this.writter.isApproved=l,this.$emit("onApprove",this.writter)),setTimeout(()=>{this.msg=null},1e3)},writterIsStopedToggel:async function(){this.loading=!0,this.error=!1,this.msg=null;const l={Id:this.writter.Id,isStoped:!this.writter.isStoped,userId:this.writter.userId};this.wNotification&&(l.notification=this.wNotification);const r=await g.updateWritter(l);this.loading=!1,this.error=!r.state,this.msg=r.message,r.state&&(this.writter.isStoped=!this.writter.isStoped,this.$emit("onStop",this.writter)),setTimeout(()=>{this.msg=null},1e3)},deleteWritter:async function(){this.loading=!0,this.error=!1,this.msg=null;const l=await g.deleteWritter(this.writter.Id);this.loading=!1,this.error=!l.state,this.msg=l.message,l.state&&this.$emit("onDelete",this.writter.Id),setTimeout(()=>{this.msg=null},1e3)}}},b=n("strong",null,"Nick Name: ",-1),B=n("strong",null,"Family Name: ",-1),q=n("strong",null,"NIC: ",-1),L=n("strong",null,"Address: ",-1),M=n("strong",null,"References: ",-1);function U(l,r,t,j,a,h){const N=v("ResMsg");return d(),u(x,{class:"ma-2 pa-4"},{default:e(()=>[i(A,null,{default:e(()=>[s(o(t.writter.fullName),1)]),_:1}),i(N,{msg:a.msg,error:a.error},null,8,["msg","error"]),i(_,null,{default:e(()=>[s(" Sent At: "),n("strong",null,o(new Date(t.writter.createdAt).toLocaleString()),1)]),_:1}),i(_,null,{default:e(()=>[s(" Last Update At: "),n("strong",null,o(new Date(t.writter.updatedAt).toLocaleString()),1)]),_:1}),i(p,null,{default:e(()=>[i(f,{onClick:r[0]||(r[0]=m=>a.show=!a.show),color:"green"},{default:e(()=>[s(" Show Detials ")]),_:1})]),_:1}),i(T,null,{default:e(()=>[k(n("div",null,[i(S),i(W,null,{default:e(()=>[i(c,null,{default:e(()=>[b,s(" "+o(t.writter.nickName),1)]),_:1}),i(c,null,{default:e(()=>[B,s(" "+o(t.writter.familyName),1)]),_:1}),i(c,null,{default:e(()=>[q,s(" "+o(t.writter.nic),1)]),_:1}),i(c,null,{default:e(()=>[L,s(" "+o(t.writter.address),1)]),_:1})]),_:1}),i(S),i(c,null,{default:e(()=>[M,s(" "+o(t.writter.references),1)]),_:1}),i(y,{modelValue:a.wNotification,"onUpdate:modelValue":r[1]||(r[1]=m=>a.wNotification=m),color:"primary",label:"Send Notification",variant:"underlined"},null,8,["modelValue"]),i(p,null,{default:e(()=>[t.writter.isApproved?(d(),u(f,{key:0,color:"green",to:{name:"WArticles",params:{id:t.writter.Id}}},{default:e(()=>[s(" His Articles ")]),_:1},8,["to"])):w("",!0),i(R),t.writter.isApproved?w("",!0):(d(),u(f,{key:1,onClick:r[2]||(r[2]=m=>h.handleWritterReq(!0)),color:"blue"},{default:e(()=>[s(" Approve ")]),_:1})),t.writter.isApproved===null?(d(),u(f,{key:2,onClick:r[3]||(r[3]=m=>h.handleWritterReq(!1)),color:"red"},{default:e(()=>[s(" Reject ")]),_:1})):w("",!0),t.writter.isApproved?(d(),u(f,{key:3,onClick:h.writterIsStopedToggel,color:"red"},{default:e(()=>[s(o(t.writter.isStoped?"UnStop Writter":"Stop Writter"),1)]),_:1},8,["onClick"])):w("",!0)]),_:1})],512),[[I,a.show]])]),_:1})]),_:1})}const E=V(D,[["render",U]]);export{E as W};
